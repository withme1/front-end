{"ast":null,"code":"import _taggedTemplateLiteral from\"/var/www/front-end/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"/var/www/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject;/*global kakao*/ /** @jsxImportSource @emotion/react */import{css}from'@emotion/react';import{Button}from'@mui/material';import{useEffect,useRef,useState}from'react';import Modal from'react-modal/lib/components/Modal';import{getDistance}from'../util/getDistance';import{getLevelByDisance}from'../util/getLevelByDistance';import{getMiddleLoc}from'../util/getMiddleLoc';import{useMediaQuery}from'react-responsive';import{jsx as _jsx}from\"@emotion/react/jsx-runtime\";import{Fragment as _Fragment}from\"@emotion/react/jsx-runtime\";import{jsxs as _jsxs}from\"@emotion/react/jsx-runtime\";function ChatMapInfo(_ref){var room=_ref.room;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var mapRef=useRef(null);var waitModalRender=function waitModalRender(cb){if(mapRef.current===null)setTimeout(function(){return waitModalRender(cb);},0);else cb();};var clickHandler=function clickHandler(e){setOpen(true);waitModalRender(function(){var startLoc=room.startLoc;var endLoc=room.endLoc;var middleLoc=getMiddleLoc(startLoc,endLoc);var options={//지도를 생성할 때 필요한 기본 옵션\ncenter:new kakao.maps.LatLng(middleLoc.latitude,middleLoc.longitude),//지도의 중심좌표.\nlevel:getLevelByDisance(getDistance(startLoc.latitude,startLoc.longitude,endLoc.latitude,endLoc.longitude)*1000)//지도의 레벨(확대, 축소 정도)\n};var map=new kakao.maps.Map(mapRef.current,options);//지도 생성 및 객체 리턴\n//마커 생성\nvar startMarker=new kakao.maps.Marker({position:new kakao.maps.LatLng(startLoc.latitude,startLoc.longitude)});startMarker.setMap(map);var startCustomOverlay=new kakao.maps.CustomOverlay({map:map,position:new kakao.maps.LatLng(startLoc.latitude,startLoc.longitude),content:\"<div style=\\\"padding:3px;position: relative;bottom:55px;color:black;background-color:white;border-radius:5px;border:1px solid black\\\">\\uCD9C\\uBC1C: \".concat(room.start,\"</div>\")});//마커 생성\nvar endMarker=new kakao.maps.Marker({position:new kakao.maps.LatLng(endLoc.latitude,endLoc.longitude)});endMarker.setMap(map);var endCustomOverlay=new kakao.maps.CustomOverlay({map:map,position:new kakao.maps.LatLng(endLoc.latitude,endLoc.longitude),content:\"<div style=\\\"padding:3px;position: relative;bottom:55px;color:black;background-color:white;border-radius:5px;border:1px solid black\\\">\\uB3C4\\uCC29: \".concat(room.end,\"</div>\")});});};var isPC=useMediaQuery({query:\"(min-width: 700px)\"});var mapButtonSytle={color:'white',boxShadow:\"0 0 0\",backgroundColor:\"#2BAE66\",padding:\"0px\",fontSize:'0.8em',width:isPC?'55px':'80px',minWidth:'55px',\"&:hover\":{boxShadow:\"0 0 0\",backgroundColor:\"#2BAE66\"}};return _jsxs(_Fragment,{children:[_jsx(Button,{sx:mapButtonSytle,onClick:clickHandler,children:\"\\uC704\\uCE58\"}),_jsx(Modal,{style:{overlay:{zIndex:2000}},isOpen:open,onRequestClose:function onRequestClose(){return setOpen(false);},ariaHideApp:false,children:_jsx(\"div\",{ref:mapRef,css:css(_templateObject||(_templateObject=_taggedTemplateLiteral([\"height: 100%\"])))})})]});}export default ChatMapInfo;","map":{"version":3,"names":["css","Button","useEffect","useRef","useState","Modal","getDistance","getLevelByDisance","getMiddleLoc","useMediaQuery","ChatMapInfo","room","open","setOpen","mapRef","waitModalRender","cb","current","setTimeout","clickHandler","e","startLoc","endLoc","middleLoc","options","center","kakao","maps","LatLng","latitude","longitude","level","map","Map","startMarker","Marker","position","setMap","startCustomOverlay","CustomOverlay","content","start","endMarker","endCustomOverlay","end","isPC","query","mapButtonSytle","color","boxShadow","backgroundColor","padding","fontSize","width","minWidth","overlay","zIndex"],"sources":["/var/www/front-end/src/main/chat/ChatMapInfo.js"],"sourcesContent":["/*global kakao*/\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { Button } from '@mui/material';\nimport { useEffect, useRef, useState } from 'react';\nimport Modal from 'react-modal/lib/components/Modal';\nimport { getDistance } from '../util/getDistance';\nimport { getLevelByDisance } from '../util/getLevelByDistance';\nimport { getMiddleLoc } from '../util/getMiddleLoc';\nimport { useMediaQuery } from 'react-responsive';\n\nfunction ChatMapInfo({ room }) {\n    const [open, setOpen] = useState(false);\n    const mapRef = useRef(null);\n\n    const waitModalRender = (cb) => {\n        if (mapRef.current === null)\n            setTimeout(() => waitModalRender(cb), 0);\n        else\n            cb();\n    }\n\n    const clickHandler = (e) => {\n        setOpen(true);\n\n        waitModalRender(() => {\n            const startLoc = room.startLoc;\n            const endLoc = room.endLoc;\n            const middleLoc = getMiddleLoc(startLoc, endLoc);\n            const options = { //지도를 생성할 때 필요한 기본 옵션\n                center: new kakao.maps.LatLng(middleLoc.latitude, middleLoc.longitude), //지도의 중심좌표.\n                level: getLevelByDisance(getDistance(startLoc.latitude, startLoc.longitude, endLoc.latitude, endLoc.longitude) * 1000) //지도의 레벨(확대, 축소 정도)\n            };\n\n            const map = new kakao.maps.Map(mapRef.current, options); //지도 생성 및 객체 리턴\n\n            //마커 생성\n            const startMarker = new kakao.maps.Marker({\n                position: new kakao.maps.LatLng(startLoc.latitude, startLoc.longitude)\n            });\n            startMarker.setMap(map);\n\n            const startCustomOverlay = new kakao.maps.CustomOverlay({\n                map: map,\n                position: new kakao.maps.LatLng(startLoc.latitude, startLoc.longitude),\n                content: `<div style=\"padding:3px;position: relative;bottom:55px;color:black;background-color:white;border-radius:5px;border:1px solid black\">출발: ${room.start}</div>`,\n            });\n\n            //마커 생성\n            const endMarker = new kakao.maps.Marker({\n                position: new kakao.maps.LatLng(endLoc.latitude, endLoc.longitude)\n            });\n            endMarker.setMap(map);\n\n            const endCustomOverlay = new kakao.maps.CustomOverlay({\n                map: map,\n                position: new kakao.maps.LatLng(endLoc.latitude, endLoc.longitude),\n                content: `<div style=\"padding:3px;position: relative;bottom:55px;color:black;background-color:white;border-radius:5px;border:1px solid black\">도착: ${room.end}</div>`,\n            });\n        })\n    }\n\n    const isPC = useMediaQuery({ query: \"(min-width: 700px)\" });\n\n    const mapButtonSytle = {\n        color: 'white',\n        boxShadow: \"0 0 0\",\n        backgroundColor: \"#2BAE66\",\n        padding: \"0px\",\n        fontSize: '0.8em',\n        width: isPC ? '55px' : '80px',\n        minWidth: '55px',\n\n        \"&:hover\": {\n            boxShadow: \"0 0 0\",\n            backgroundColor: \"#2BAE66\"\n        }\n    };\n\n    return (\n        <>\n            <Button sx={mapButtonSytle} onClick={clickHandler}>위치</Button>\n            <Modal\n                style={{ overlay: { zIndex: 2000 } }}\n                isOpen={open}\n                onRequestClose={() => setOpen(false)}\n                ariaHideApp={false}\n            >\n                <div ref={mapRef} css={css`height: 100%`}></div>\n            </Modal>\n        </>\n    )\n}\n\nexport default ChatMapInfo"],"mappings":"oPAAA,gB,CACA,sCACA,OAASA,GAAT,KAAoB,gBAApB,CACA,OAASC,MAAT,KAAuB,eAAvB,CACA,OAASC,SAAT,CAAoBC,MAApB,CAA4BC,QAA5B,KAA4C,OAA5C,CACA,MAAOC,CAAAA,KAAP,KAAkB,kCAAlB,CACA,OAASC,WAAT,KAA4B,qBAA5B,CACA,OAASC,iBAAT,KAAkC,4BAAlC,CACA,OAASC,YAAT,KAA6B,sBAA7B,CACA,OAASC,aAAT,KAA8B,kBAA9B,C,wKAEA,QAASC,CAAAA,WAAT,MAA+B,IAARC,CAAAA,IAAQ,MAARA,IAAQ,CAC3B,cAAwBP,QAAQ,CAAC,KAAD,CAAhC,wCAAOQ,IAAP,eAAaC,OAAb,eACA,GAAMC,CAAAA,MAAM,CAAGX,MAAM,CAAC,IAAD,CAArB,CAEA,GAAMY,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,EAAD,CAAQ,CAC5B,GAAIF,MAAM,CAACG,OAAP,GAAmB,IAAvB,CACIC,UAAU,CAAC,iBAAMH,CAAAA,eAAe,CAACC,EAAD,CAArB,EAAD,CAA4B,CAA5B,CAAV,CADJ,IAGIA,CAAAA,EAAE,GACT,CALD,CAOA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxBP,OAAO,CAAC,IAAD,CAAP,CAEAE,eAAe,CAAC,UAAM,CAClB,GAAMM,CAAAA,QAAQ,CAAGV,IAAI,CAACU,QAAtB,CACA,GAAMC,CAAAA,MAAM,CAAGX,IAAI,CAACW,MAApB,CACA,GAAMC,CAAAA,SAAS,CAAGf,YAAY,CAACa,QAAD,CAAWC,MAAX,CAA9B,CACA,GAAME,CAAAA,OAAO,CAAG,CAAE;AACdC,MAAM,CAAE,GAAIC,CAAAA,KAAK,CAACC,IAAN,CAAWC,MAAf,CAAsBL,SAAS,CAACM,QAAhC,CAA0CN,SAAS,CAACO,SAApD,CADI,CAC4D;AACxEC,KAAK,CAAExB,iBAAiB,CAACD,WAAW,CAACe,QAAQ,CAACQ,QAAV,CAAoBR,QAAQ,CAACS,SAA7B,CAAwCR,MAAM,CAACO,QAA/C,CAAyDP,MAAM,CAACQ,SAAhE,CAAX,CAAwF,IAAzF,CAA+F;AAF3G,CAAhB,CAKA,GAAME,CAAAA,GAAG,CAAG,GAAIN,CAAAA,KAAK,CAACC,IAAN,CAAWM,GAAf,CAAmBnB,MAAM,CAACG,OAA1B,CAAmCO,OAAnC,CAAZ,CAAyD;AAEzD;AACA,GAAMU,CAAAA,WAAW,CAAG,GAAIR,CAAAA,KAAK,CAACC,IAAN,CAAWQ,MAAf,CAAsB,CACtCC,QAAQ,CAAE,GAAIV,CAAAA,KAAK,CAACC,IAAN,CAAWC,MAAf,CAAsBP,QAAQ,CAACQ,QAA/B,CAAyCR,QAAQ,CAACS,SAAlD,CAD4B,CAAtB,CAApB,CAGAI,WAAW,CAACG,MAAZ,CAAmBL,GAAnB,EAEA,GAAMM,CAAAA,kBAAkB,CAAG,GAAIZ,CAAAA,KAAK,CAACC,IAAN,CAAWY,aAAf,CAA6B,CACpDP,GAAG,CAAEA,GAD+C,CAEpDI,QAAQ,CAAE,GAAIV,CAAAA,KAAK,CAACC,IAAN,CAAWC,MAAf,CAAsBP,QAAQ,CAACQ,QAA/B,CAAyCR,QAAQ,CAACS,SAAlD,CAF0C,CAGpDU,OAAO,+JAA6I7B,IAAI,CAAC8B,KAAlJ,UAH6C,CAA7B,CAA3B,CAMA;AACA,GAAMC,CAAAA,SAAS,CAAG,GAAIhB,CAAAA,KAAK,CAACC,IAAN,CAAWQ,MAAf,CAAsB,CACpCC,QAAQ,CAAE,GAAIV,CAAAA,KAAK,CAACC,IAAN,CAAWC,MAAf,CAAsBN,MAAM,CAACO,QAA7B,CAAuCP,MAAM,CAACQ,SAA9C,CAD0B,CAAtB,CAAlB,CAGAY,SAAS,CAACL,MAAV,CAAiBL,GAAjB,EAEA,GAAMW,CAAAA,gBAAgB,CAAG,GAAIjB,CAAAA,KAAK,CAACC,IAAN,CAAWY,aAAf,CAA6B,CAClDP,GAAG,CAAEA,GAD6C,CAElDI,QAAQ,CAAE,GAAIV,CAAAA,KAAK,CAACC,IAAN,CAAWC,MAAf,CAAsBN,MAAM,CAACO,QAA7B,CAAuCP,MAAM,CAACQ,SAA9C,CAFwC,CAGlDU,OAAO,+JAA6I7B,IAAI,CAACiC,GAAlJ,UAH2C,CAA7B,CAAzB,CAKH,CAlCc,CAAf,CAmCH,CAtCD,CAwCA,GAAMC,CAAAA,IAAI,CAAGpC,aAAa,CAAC,CAAEqC,KAAK,CAAE,oBAAT,CAAD,CAA1B,CAEA,GAAMC,CAAAA,cAAc,CAAG,CACnBC,KAAK,CAAE,OADY,CAEnBC,SAAS,CAAE,OAFQ,CAGnBC,eAAe,CAAE,SAHE,CAInBC,OAAO,CAAE,KAJU,CAKnBC,QAAQ,CAAE,OALS,CAMnBC,KAAK,CAAER,IAAI,CAAG,MAAH,CAAY,MANJ,CAOnBS,QAAQ,CAAE,MAPS,CASnB,UAAW,CACPL,SAAS,CAAE,OADJ,CAEPC,eAAe,CAAE,SAFV,CATQ,CAAvB,CAeA,MACI,4BACI,KAAC,MAAD,EAAQ,EAAE,CAAEH,cAAZ,CAA4B,OAAO,CAAE5B,YAArC,0BADJ,CAEI,KAAC,KAAD,EACI,KAAK,CAAE,CAAEoC,OAAO,CAAE,CAAEC,MAAM,CAAE,IAAV,CAAX,CADX,CAEI,MAAM,CAAE5C,IAFZ,CAGI,cAAc,CAAE,gCAAMC,CAAAA,OAAO,CAAC,KAAD,CAAb,EAHpB,CAII,WAAW,CAAE,KAJjB,UAMI,YAAK,GAAG,CAAEC,MAAV,CAAkB,GAAG,CAAEd,GAAF,6EAArB,EANJ,EAFJ,GADJ,CAaH,CAED,cAAeU,CAAAA,WAAf"},"metadata":{},"sourceType":"module"}