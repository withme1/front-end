{"ast":null,"code":"var _jsxFileName = \"/var/www/front-end/src/main/chat/Chat.js\",\n    _s = $RefreshSig$();\n\n/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { Button, TextField } from '@mui/material';\nimport ChatView from './ChatView';\nimport { getSocket } from '../../socket/socket';\nimport { useEffect, useRef, useState } from 'react';\nimport dayjs from 'dayjs';\nimport ChatRoomInfo from './ChatRoomInfo';\nimport { useMediaQuery } from 'react-responsive';\nimport { jsxDEV as _jsxDEV } from \"@emotion/react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"@emotion/react/jsx-dev-runtime\";\nconst chatStyle = css`\n  height: 100%;\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n`;\n\nconst checkMessage = m => {\n  if (m === '') return false;\n  return true;\n};\n\nfunction Chat(_ref) {\n  _s();\n\n  let {\n    roomList,\n    remake,\n    setRemake,\n    isInRoom,\n    setIsInRoom,\n    isHost,\n    setIsHost,\n    roomId,\n    setRoomId,\n    chatList,\n    setChatList,\n    addMessage,\n    setRoomList,\n    chatStyleRef\n  } = _ref;\n  const [message, setMessage] = useState('');\n\n  const chatHandler = e => {\n    e.preventDefault();\n    if (!isInRoom) return;\n    if (checkMessage(message)) getSocket().emit('sendMessageReq', {\n      message: message,\n      time: dayjs().format('HH:mm:ss')\n    });\n  };\n\n  useEffect(() => {\n    getSocket().removeAllListeners(\"sendMessageRes\");\n    getSocket().on('sendMessageRes', res => {\n      if (res.ok) {\n        addMessage({\n          type: 'me',\n          text: res.message,\n          time: dayjs('2020-01-01 ' + res.time)\n        });\n        setMessage('');\n      } else {\n        alert(res.reason);\n      }\n    });\n    getSocket().removeAllListeners(\"messageReceived\");\n    getSocket().on('messageReceived', res => {\n      addMessage({\n        type: 'other',\n        text: res.message,\n        time: dayjs('2020-01-01 ' + res.time)\n      });\n    });\n  }, []);\n  const isPC = useMediaQuery({\n    query: \"(min-width: 700px)\"\n  });\n  const textFieldStyle = {\n    flexGrow: '1',\n    '.MuiOutlinedInput-root input': {\n      padding: \"5px;\",\n      fontSize: '0.8em',\n      height: '100%'\n    },\n    '.MuiOutlinedInput-root fieldset': {\n      borderColor: 'green'\n    },\n    '.MuiOutlinedInput-root.Mui-focused fieldset': {\n      borderColor: 'green'\n    }\n  };\n  const sendButtonStyle = {\n    boxShadow: \"0 0 0\",\n    backgroundColor: \"#2BAE66\",\n    padding: \"0px\",\n    fontSize: '0.8em',\n    width: isPC ? '45px' : '80px',\n    minWidth: 'none',\n    \"&:hover\": {\n      boxShadow: \"0 0 0\",\n      backgroundColor: \"#2BAE66\"\n    }\n  };\n  return _jsxDEV(\"div\", {\n    css: chatStyle,\n    children: [isInRoom ? _jsxDEV(ChatRoomInfo, {\n      room: roomList.find(room => room.id === roomId),\n      isInRoom: isInRoom,\n      isHost: isHost\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 20\n    }, this) : _jsxDEV(_Fragment, {}, void 0, false), _jsxDEV(ChatView, {\n      chatList: chatList,\n      setChatList: setChatList,\n      chatStyleRef: chatStyleRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), _jsxDEV(\"form\", {\n      css: css`display: flex; height: ${isPC ? '30px' : '50px'};`,\n      onSubmit: chatHandler,\n      children: [_jsxDEV(TextField, {\n        autoComplete: \"off\",\n        sx: textFieldStyle,\n        value: message,\n        onChange: e => setMessage(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), _jsxDEV(Button, {\n        variant: \"contained\",\n        sx: sendButtonStyle,\n        onClick: chatHandler,\n        children: \"\\uBCF4\\uB0B4\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Chat, \"C384SaxVYVpFLaqHO8dlDFntzvM=\", false, function () {\n  return [useMediaQuery];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["css","Button","TextField","ChatView","getSocket","useEffect","useRef","useState","dayjs","ChatRoomInfo","useMediaQuery","chatStyle","checkMessage","m","Chat","roomList","remake","setRemake","isInRoom","setIsInRoom","isHost","setIsHost","roomId","setRoomId","chatList","setChatList","addMessage","setRoomList","chatStyleRef","message","setMessage","chatHandler","e","preventDefault","emit","time","format","removeAllListeners","on","res","ok","type","text","alert","reason","isPC","query","textFieldStyle","flexGrow","padding","fontSize","height","borderColor","sendButtonStyle","boxShadow","backgroundColor","width","minWidth","find","room","id","target","value"],"sources":["/var/www/front-end/src/main/chat/Chat.js"],"sourcesContent":["/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport { Button, TextField } from '@mui/material';\nimport ChatView from './ChatView';\nimport { getSocket } from '../../socket/socket'\nimport { useEffect, useRef, useState } from 'react';\nimport dayjs from 'dayjs';\nimport ChatRoomInfo from './ChatRoomInfo';\nimport { useMediaQuery } from 'react-responsive';\n\nconst chatStyle = css`\n  height: 100%;\n  width: 100%;\n\n  display: flex;\n  flex-direction: column;\n`;\n\nconst checkMessage = (m) => {\n  if (m === '')\n    return false;\n  return true;\n}\n\nfunction Chat({ roomList, remake, setRemake, isInRoom, setIsInRoom, isHost, setIsHost, roomId, setRoomId, chatList, setChatList, addMessage, setRoomList, chatStyleRef }) {\n  const [message, setMessage] = useState('');\n\n  const chatHandler = (e) => {\n    e.preventDefault();\n    if (!isInRoom)\n      return;\n\n    if (checkMessage(message))\n      getSocket().emit('sendMessageReq', { message: message, time: dayjs().format('HH:mm:ss') });\n  }\n\n  useEffect(() => {\n    getSocket().removeAllListeners(\"sendMessageRes\");\n    getSocket().on('sendMessageRes', (res) => {\n      if (res.ok) {\n        addMessage({ type: 'me', text: res.message, time: dayjs('2020-01-01 ' + res.time) });\n        setMessage('');\n      } else {\n        alert(res.reason)\n      }\n    })\n    getSocket().removeAllListeners(\"messageReceived\");\n    getSocket().on('messageReceived', (res) => {\n      addMessage({ type: 'other', text: res.message, time: dayjs('2020-01-01 ' + res.time) });\n    })\n  }, [])\n\n  const isPC = useMediaQuery({query : \"(min-width: 700px)\"});\n\n  const textFieldStyle = {\n    flexGrow: '1',\n    '.MuiOutlinedInput-root input': {\n      padding: \"5px;\",\n      fontSize: '0.8em',\n      height: '100%',\n    },\n    '.MuiOutlinedInput-root fieldset': {\n      borderColor: 'green',\n    },\n    '.MuiOutlinedInput-root.Mui-focused fieldset': {\n      borderColor: 'green',\n    }\n  };\n  \n  const sendButtonStyle = {\n    boxShadow: \"0 0 0\",\n    backgroundColor: \"#2BAE66\",\n    padding: \"0px\",\n    fontSize: '0.8em',\n    width: isPC ? '45px' : '80px',\n    minWidth: 'none',\n  \n    \"&:hover\": {\n      boxShadow: \"0 0 0\",\n      backgroundColor: \"#2BAE66\"\n    }\n  };\n\n  return (\n    <div css={chatStyle}>\n      { isInRoom ? <ChatRoomInfo room={roomList.find(room => room.id === roomId)} isInRoom={isInRoom} isHost={isHost}/> : <></>}\n      <ChatView chatList={chatList} setChatList={setChatList} chatStyleRef={chatStyleRef} />\n      <form css={css`display: flex; height: ${isPC ? '30px' : '50px'};`} onSubmit={chatHandler}>\n        <TextField autoComplete='off' sx={textFieldStyle} value={message} onChange={(e) => setMessage(e.target.value)} />\n        <Button variant=\"contained\" sx={sendButtonStyle} onClick={chatHandler}>보내기</Button>\n      </form>\n    </div>\n  )\n}\n\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module"}